\section{Domains, graphs, adjoints and spectrum}

It is a fact of life that many of the most important operators which occur in mathematical physics are not bounded. In this chapter we will introduce some of the basic definitions and theorems necessary for dealing with unbounded operators on Hilbert spaces. The Hellinger-Toeplitz theorem (see Section III.5) says that an everywhere-defined operator $\op A$ which satisfies $(\op A \phi, \psi) = (\phi, \op A \psi) $ is necessarily a bounded operator suggesting that a general unbounded operator $\op T$ will only be defined on a dense linear subset of the Hilbert space.
Thus an \textbf{operator} on a Hilbert space $\H$ is a linear map from its domain, a linear subspace of $\H$, into $\H$. Unless we specify otherwise, we will always suppose that the domain is dense. This subspace, which we denote by $D( \op T)$, is called the \textbf{domain} of the operator $\op T$. So, to identify an unbounded operator on a Hilbert space one must first give the domain on which it acts and then specify how it acts on that subspace.

\begin{example}[The position operator]
Let $\H = \L{2}{\R}$ and let $D(\op T)$ be the set of functions $\phi$ in $\L{2}{\R}$ which satisfy $\intR x^2 |\phi(x)|^2 \, \D x < \infty$. For $\phi \in D(\op T)$ define $(\op T \phi)(x) = x \phi(x)$. It is clear that $\op T$ is unbounded since if we choose $\phi$ to have support near plus or minus infinity, we can make $\norm{\op T \phi}$ as large as we like while keeping $\norm{\phi} =1$. Of course, even if $\phi \notin D(\op T)$, $x \phi(x)$ has a well- defined meaning as a function, but it is not in $\L{2}{\R}$. Thus, if we want to deal only with the Hilbert space $\L{2}{\R}$ we must restrict the domain of $\op T$. The domain we have chosen is the largest one for which the range is in $\L{2}{\R}$.
\end{example}

\begin{example}
Let $\H = \L{2}{\R}$ and $D(\op T)= \Schwartz{\R}$. On $D(\op T)$ define $\op T \psi = - \psi"(x) + x^2 \psi(x)$. If $\phi_n(x)$ is the $n$-th Hermite function (see the appendix to Section V.3), then $\phi_n \in D(\op T)$ and $\op T\phi_n(x) = (2n+1) \phi_n(x)$. Thus $\op T$ must be unbounded since it has arbitrarily large eigenvalues.
\end{example}

The notion of the graph of a linear transformation, introduced by von Neumann, is very useful for studying unbounded operators.

\begin{definition}
The \textbf{graph} of the linear transformation $\op T$ is the set of pairs
\begin{align}
    \set{[\phi, \op T \phi] | \phi \in D(\op T)} \:.
\end{align}
The graph of $\op T$, denoted by $\Gamma(\op T)$, is thus a subset of $\H \times \H$ which is a Hilbert space with inner product \begin{align}
    \left([\phi_1, \psi_1], [\phi_2, \psi_2] \right) = (\phi_1, \phi_2) + (\psi_1, \psi_2) \:.
\end{align}
$\op T$ is called a closed operator if $\Gamma(\op T)$ is a closed subset of $\H \times \H$.
\end{definition}

\begin{definition}
    Let $\op T_1$ and $\op T$ be operators on $\H$. If $\Gamma(\op T_1) \supset \Gamma(\op T)$, then $\op T_1$ is said to be an \textbf{extension }of $\op T$ and we write $\op T_1 \supset \op T$. Equivalently, $\op T_1 \supset \op T$ if and only if $D(\op T_1) \supset D(\op T)$ and $\op T_1 \phi = \op T \phi$ for all $\phi \in D(\op T)$.
\end{definition}

\begin{definition}
An operator $\op T$ is \textbf{closable} if it has a closed extension. Every closable operator has a smallest closed extension, called its \textbf{closure}, which we denote by $\o{\op T}$.   
\end{definition}


A natural way to try to obtain a closed extension of an operator $\op T$, is to take the closure of its graph in $\H \times \H$. The trouble with this is that $\Gamma(\op T)$ may not be the graph of an operator (for example, see Problem 1). However, most operators which we deal with will be symmetric operators (introduced Section VIII.2) and we will see that they always have closed extensions.

\begin{proposition}
If $\op T$ is closable, then $\Gamma(\o{\op T}) = \o{\Gamma(\op T)}$.
\end{proposition}

\begin{proof}
Suppose that $\op S$ is a closed extension of $\op T$. Then $\o{\Gamma(\op T)} \subset \Gamma(\op S)$ so if $[0, \psi] \in \o{\Gamma(\op T)}$ then $\psi = 0$.  

Define $\op R$ with $D(\op R) = \set{\psi | [\psi, \phi] \in \o{\Gamma(\op T)} \text{ for some } \phi}$ by $\op R \psi = \phi$ where $\phi \in \H$ is the unique vector so that $[\psi, \phi] \in \o{\Gamma(\op T)}$. Then
$\Gamma(\op R) = \o{\Gamma(\op T)}$ so $\op R$ is a closed extension of $\op T$. But $\op R \subset \op S$ which is an arbitrary
closed extension, so $\op R= \op T$.
\end{proof}

The following example illustrates the concepts we have just introduced.

\begin{example}
Let $\H = \L{2}{\R}$, $D(\op T) = C_0^\infty(\R)$ and $D(\op T_1) = C_0^1(\R)$, the once continuously differentiable functions with compact support.
Let $\op T f= \i f'(x)$ if $f \in D(\op T)$ and $\op T_1 f= \i f'(x)$ if  $f \in D(\op T_1)$. $\op T_1$ is an extension of $\op T$.

We will show that $\o{\Gamma(\op T)} \supset \Gamma(\op T_1)$. When we prove that $\op T$ is symmetric and therefore closable, it will follow that $\op T$ extends $\op T_1$. 

First we introduce the approximate identity, $\set{j_\varepsilon(x)}$. Let $j(x)$ be any positive, infinitely differentiable function with support in $(-1, 1)$ so that $\intR j(x) \D x = 1$. Define $j_\varepsilon(x) = \frac{1}{\varepsilon} j(\frac{x}{\varepsilon})$. If $\phi \in D(\op T_1)$, set \begin{align}
    \phi_\varepsilon(x) = \intR j_\varepsilon (x-t) \phi(t) \, \D t \:.
\end{align}
Then \begin{align}
    |\phi_\varepsilon(x) - \phi(x)| \leq \intR j_\varepsilon (x-t) |\phi(t) - \phi(x)| \, \D t\leq \\
    \leq \left( \sup_{t : |x-t| < \varepsilon} |\phi(t) - \phi(x)| \right) \intR j_\varepsilon (x-t) \, \D t=  \sup_{t : |x-t| < \varepsilon} |\phi(t) - \phi(x)| \:. \nonumber
\end{align}


Since $\phi$ has compact support, it is uniformly continuous which implies that $\phi_\varepsilon \rightarrow \phi$ uniformly. Since the $\phi_\varepsilon$ have support in a fixed compact set, $\phi_\varepsilon \rightarrow \phi$ in $\L{2}{\R}$.

Similarly,
\begin{align}
    \i \der{}{x} \phi_\varepsilon(x) 
    =&
    \intR \i \der{}{x} j_\varepsilon (x-t) \phi(t) \, \D t 
    = 
    \intR - \i \left( \der{}{t} j_\varepsilon (x-t) \right) \phi(t) \, \D t 
    = \\ =&
    \intR j_\varepsilon(x-t) \i \der{}{t} \phi(t) \, \D t 
    \overset{\L{2}{\R}} \longrightarrow
     \i  \der{}{x} \phi(x) \:. \nonumber
\end{align}

Since $j_\varepsilon(x)$ has compact support and is infinitely differentiable, $\phi_\varepsilon \in C_0^\infty(\R)$.
Thus, $\phi_\varepsilon \in D(\op T)$ for each $\varepsilon >0$. What we have shown above is that \begin{align}
    \phi_\varepsilon\overset{\L{2}{\R}} \longrightarrow \phi \:, 
	\quad     
    \op T \phi_\varepsilon \overset{\L{2}{\R}} \longrightarrow \op T \phi \:.
\end{align}
Thus, the closure of the graph of $\op T$ contains the graph of $\op T_1$. The notion of adjoint operator can be extended to the unbounded case.
\end{example}

\begin{definition}
Let $\op T$ be a densely defined linear operator on a Hilbert space $\H$. Let $D(\op T^\star)$ be the set of $\phi \in \H$ for which there is an $\eta \in \H$ with
\begin{align}
    (\op T \psi, \phi) = (\psi, \eta) \quad \text{for all } \psi \in D(\op T) \:. \label{eq:VIII.1}
\end{align}
For each such $\phi \in D(\op T^\star)$ we define $\op T^\star \phi = \eta$. $\op T^\star$ is called the \textbf{adjoint} of $\op T$. By the Riesz lemma, $\phi \in D(\op T^\star)$ if and only if $|(\op T \psi, \phi)| \leq C \norm{\psi}$ for all $\psi \in D(\op T)$.
\end{definition}


We note that $\op S \subset \op T$ implies $\op T^\star \subset \op S^\star$. Notice that for $\eta$ to be uniquely determined by \eqref{eq:VIII.1} we need the fact that $D(\op T)$ is dense. Unlike the case of bounded operators, the domain of $\op T^\star$ may not be dense as the following example shows. As a matter of fact it is possible to have $D(\op T^\star) = \set{0}$.

\begin{example}
Suppose that $f$ is a bounded measurable function, but that $f \notin \L{2}{\R}$. Let $D(\op T) = \set{\psi \in \L{2}{\R} | \intR f(x) \psi(x) \, \D x < \infty  }$. $D(\op T)$ certainly contains all the $L^2$ functions with compact support so $D(\op T)$ is dense in $\L{2}{\R}$. Let $\psi_0$ be some fixed vector in $\L{2}{\R}$ and define $\op T \psi = (f, \psi) \psi_0$ for $\psi \in D(\op T)$. Suppose that $\phi \in D(\op T^\star)$, then for all $\psi \in D(\op T)$
\begin{align}
    (\psi, \op T^\star \phi) = (\op T \psi, \phi) = ((f, \psi) \psi_0, \phi) = \o{(f, \psi)} (\psi_0, \phi) = (\psi, (\psi_0, \phi) f) \:. 
\end{align}
Thus $\op T^\star \phi = (\psi_0, \phi) f$. Since $f \notin \L{2}{\R}$, $(\psi_0, \phi) = 0$. Thus any $\phi \in D(\op T^\star)$ is orthogonal to $\psi_0$, so $D(\op T^\star)$ is not dense. In fact, $D(\op T^\star)$ is just the vectors perpendicular to $\psi_0$, and on that domain $\op T^\star$ is the zero operator.
\end{example}

If the domain of $\op T^\star$ is dense, then we can define $\op T^{\star \star} = (\op T^\star)^\star$. There is a simple relationship between the notions of adjoint and closure.

\begin{theorem}
Let $\op T$ be a densely defined operator on a Hilbert space $\H$. Then:
\begin{itemize}
    \item $\op T^\star$ is closed.
    \item $\op T$ is closable if and only if $D(\op T^\star)$ is dense in which case $\o{\op T} = \op T^{\star \star}$.
    \item If \,$\op T$ is closable, then $(\o{\op T})^\star = \op T^\star$.
\end{itemize}

\end{theorem}

\begin{proof}
We define a unitary operator $\op V$ on $\H \times \H$ by
\begin{align}
    \op V [\phi, \psi] = [-\psi, \phi] \:.
\end{align}
Since $\op V$ is unitary, $\op V[E^\bot] = (\op V[E])^\bot$ for any subspace $E$. Let $\op T$ be a linear operator on $\H$ and suppose $[\phi, \eta] \subset \H \times \H$. Then $[\phi, \eta] \in \op V[\Gamma(\op T)]^\bot$ if and only if $\left( [\phi, \eta], [- \op T \psi, \psi] \right) = 0$ for all $\psi \in D(\op T)$ which holds if and only if $(\phi, \op T \psi) = (\eta, \psi)$ for all $\psi \in D(\op T)$, that is, if and only if $[\phi, \eta] \in \Gamma(\op T^\star)$. Thus $\Gamma(\op T^\star) = \op V \left[\Gamma(\op T) \right]^\bot$. 
Since $\op V[\Gamma(\op T)]^\bot$ is always a closed subspace\footnote[1]{MB: If $M$ is an subspace of $\H$, then $M^\bot$ is always closed. If $\set{y_n}_n \subset M^\bot$ which $y_n \rightarrow y$, then $(y_n,x) = 0$ for all $x \in M$ and so $(y,x) = 0$ for all $x \in M$, therefore $y \in \H$. Also $(M^\bot)^\bot = \o{M}$.} of $\H \times \H$, this proves (1).

To prove (2), observe that $\Gamma(\op T)$ is a linear subset of $\H \times \H$ so
\begin{align}
    \o{\Gamma(\op T)} = \left[ \Gamma(\op T)^\bot \right]^\bot = \left[ \op V^2 \Gamma(\op T)^\bot \right]^\bot = \left[ \op V(\op V \Gamma(\op T))^\bot \right]^\bot \:.
\end{align}
Thus, by the proof of (1), if $\op T^\star$ is densely defined, $\Gamma(\op T)$ is the graph of $\op T^{\star \star}$.

Conversely, suppose that $D(\op T^\star)$ is not dense and that $ \psi \in D(\op T^\star)^\star$. A simple computation shows that $[\psi,0] \in [\Gamma(\op T^\star)]^\bot$ so $\op V\left[\op T(\op T^\star)\right]^\bot$ is not the graph of a (single-valued) operator. Since $\o{\Gamma(\op T)} = \op V\left[\op T(\op T^\star)\right]^\bot$, we see that $\op T$ is not closable.

To prove (3), notice that if $\op T$ is closable,
\begin{align}
    \op T^\star = \o{(\op T^\star)} = \op T^{\star \star \star} =(\o{\op T})^\star \:.
\end{align}
\end{proof}

\begin{definition}
Let $\op T$ be a closed operator on a Hilbert space 9. A complex number $\lambda$ is in the resolvent set $\rho(\op T)$, if $ \lambda \op I - \op T$ is a bijection of $D(\op T)$ onto $\H$ with a bounded inverse. If $\lambda \in \rho(\op T)$, operator $\op R_\lambda(\op T) = (\lambda \op I - \op T)^{-1}$ is called the \textbf{resolvent} of $\op T$
at $\lambda$.
\end{definition}

For a point to be in the resolvent set of $\op T$, several conditions must be satisfied. These conditions are not all independent. For example, if $ \lambda \op I - \op T$ is a bijection of $D(\op T)$ onto $\H$, by the closed-graph theorem, its inverse is automatically bounded. For other relationships, see Problem 2.

The definitions of \textbf{spectrum}, \textbf{point spectrum}, and \textbf{residual spectrum} are the same for unbounded operators as they are for bounded operators. We will sometimes refer to the spectrum of nonclosed, but closable operators. In this case we always mean the spectrum of the closure.

\begin{theorem}
Let $\op T$ be a closed densely defined linear operator. Then
the resolvent set of $\op T$ is an open subset of the complex plane on which the resolvent is an analytic operator-valued function. Furthermore,
\begin{align}
    \set{\op R_\lambda (\op T) | \lambda \in \rho(\op T)}
\end{align}
is a commuting family of bounded operators satisfying
\begin{align}
   \op R_\lambda(\op T) - \op R_\mu (\op T) = (\mu - \lambda) \op R_\mu (\op T) \op R_\lambda (\op T) \:. 
\end{align}

\end{theorem}

The proof of this theorem is exactly the same as the proof of the bounded
case (Theorem VI.5).
It may seem to the reader that many of the questions about domains and closures of unbounded operators are just a technical inconvenience; that one need only choose any dense domain which is small enough so that the unbounded operator makes sense and that is good enough. However, the choice of an appropriate domain is often intimately connected with the physics of the situation being described; see, for example, the discussion in Section X.1.
Further, many of the properties of operators which are important are very sensitive to the choice of domain. The following example shows that the spectrum is such a property. In the example we use the notion of \enquote{absolutely continuous function} and the corresponding fundamental theorem of calculus. The reader who is unfamiliar with the definition and theorem can find them in the notes.

\begin{example}
We denote by $AC[0, 1]$ the set of absolutely continuous functions on $[0, 1]$ whose derivatives are in $\L{2}{[0,1]}$. Let $\op T_1$, and $\op T_2$, be the operation $\i \der{}{x}$ with domains
\begin{align}
    D(\op T_1) = \set{\phi | \phi \in AC[0,1]} \:, \\
    D(\op T_2) = \set{\phi | \phi \in AC[0,1] \text{ and } \phi(0)=0} \:.
\end{align}
Both $D(\op T_1)$ and $D(\op T_2)$ are dense in $\L{2}{[0,1]}$ and both of the operators are closed. But: \begin{enumerate}
    \item The spectrum of $\op T_1$ is $\C$.
    \item The spectrum of $\op T_2$ is empty.
\end{enumerate}

The proof that $\op T_1$ and $\op T_2$ are closed is left as an exercise (Problem 3). To see that the spectrum of $\op T_1$ is the whole plane we observe that
\begin{align}
    (\lambda \op I - \op T_1) e^{-\i \lambda x} = 0 \quad \text{ and} e^{-\i \lambda x} \in D(\op T_1)
\end{align}
for all $\lambda \in \C$. As for the $\op T_2$, the operator \begin{align}
    (\op S_\lambda g)(x) = \i \int_0^x e^{-\i \lambda(x-s)} g(s) \, \D s
\end{align}
satisfies $(\lambda I - \op T_2) \op S_\lambda = \op I$ and $\op S_\lambda (\lambda \op I - \op T_2)$ is the identity on $D(\op T_2)$. Moreover, 
\begin{align}
    \norm{\op S_\lambda g}_2^2 =& \int_0^1 |(\op S_\lambda g)(x)|^2 \, \D x 
    \leq \left( \sup_{x \in [0,1]} |(\op S_\lambda g)(x)| \right)^2 
    \leq \\ \leq&
     \left( \sup_{x \in [0,1]} \int_0^x |e^{-\i\lambda(x-s)} g(s)|  \, \D s \right)^2 \nonumber
    \leq \\ \leq&
    \left( \sup_{x \in [0,1]} \int_0^x \left|e^{-\i\lambda(x-s)} g(s) \right|^2  \, \D s \right)
    \left( \sup_{x \in [0,1]} \int_0^x |g(s)|^2 \, \D s \right)
    \leq C(\lambda) \norm{g}_2^2 \:, \nonumber
\end{align}
so $\op S_\lambda$ is bounded. By the remark immediately after the definition of resolvent set, we need only have shown that $\lambda \op I - \op T_2$ is a bijection to conclude that $\op S_\lambda$ is bounded. So, we could have avoided the above computation.

\end{example}

\section{Symmetric and self-adjoint operators:
the basic criterion for self-adjointness}

\begin{definition}
A densely defined operator $\op T$ on a Hilbert space is called \textbf{symmetric} (or \textbf{Hermitian}) if $\op T \subset \op T^\star$, that is, if $D(\op T) < D(\op T^\star)$ and $\op T \phi = \op T^\star \phi$ for all $\phi \in D(\op T)$. Equivalently, $\op T$ is symmetric if and only if
\begin{align}
    (\op T \phi, \psi) = (\phi, \op T \psi) \quad \text{for all } \phi, \psi \in D (\op T) \:.
\end{align}

\end{definition}

\begin{definition}
    $\op T$ is called \textbf{self-adjoint} if $\op T = \op T^\star$, that is, if and only if  $\op T$ is symmetric and $D(\op T) = D(\op T^\star)$.
\end{definition}

A symmetric operator is always closable, since $D(\op T^\star) \supset D(\op T)$ is dense in $\H$. If $\op T$ is symmetric, $\op T^\star$ is a closed extension of $\op T$, so the smallest closed extension $T^{\star \star}$ of $\op T$ must be contained in $\op T^\star$. Thus for symmetric operators, we have
\begin{align}
    \op T \subset \op T^{\star \star} \subset \op T^\star \:.
\end{align}
For closed symmetric operators, \begin{align}
    \op T = \op T^{\star\star} \subset \op T^\star \:.
\end{align}
And, for self-adjoint operators,
\begin{align}
    \op T= \op T^{\star \star} = \op T^{\star } \:. 
\end{align}

From this one can easily see that a closed symmetric operator $\op T$ is self-adjoint if and only if $\op T^\star$ is symmetric.
The distinction between closed symmetric operators and self-adjoint operators is very important. It is only for self-adjoint operators that the spectral theorem holds (see Section VIII.3) and it is only self-adjoint operators that may be exponentiated to give the one-parameter unitary groups (see Section VII1.4) which give the dynamics in quantum mechanics. Chapter X is mainly devoted to studying methods for proving that operators are self adjoint. We content ourselves here with proving the basic criterion for self-adjointness. First, we introduce the useful notion of essential self-adjointness.

\begin{definition}
A symmetric operator $\op T$ is called \textbf{essentially self-adjoint} if its closure $\o{\op T}$ is self-adjoint. If $\op T$ is closed, a subset $D \subset D(\op T)$ is called a \textbf{core} for $\op T$ if $\o{\op T|_{D}} = \op T$. 
\end{definition}

If $\op T$ is essentially self-adjoint, then it has one and only one self-adjoint extension, for suppose that $\op S$ is a self-adjoint extension of $\op T$. Then, $\op S$ is closed and thereby, since $\op S \supset \op T$, $\op S \supset \op T^{\star \star}$. Thus, $\op S = \op S^\star \subset (\op T^{\star \star})^\star = \op T^{\star \star}$, and so
$\op S = \op T^{\star \star}$. The converse is also true; namely, if $\op T$ has one and only one self-adjoint extension, then $\op T$ is essentially self-adjoint (see Section X.1). Since
$\op T^{\star} = \o{\op T}^{\star} = \op T^{\star \star \star}$, $\op T$ is essentially self-adjoint if and only if
\begin{align}
    \op T \subset \op T^{\star \star} = \op T^{\star} \:.
\end{align}

The importance of essential self-adjointness is that one is often given a nonclosed symmetric operator $\op T$. If $\op T$ can be shown to be essentially self-adjoint, then there is uniquely associated to $\op T$ a self-adjoint operator $\op T = \op T^{\star \star}$.
Another way of saying this is that if $\op A$ is a self-adjoint operator, then to specify $\op A$ uniquely one need not give the exact domain of $\op A$ (which is often difficult), but just some core for $\op A$. Now, suppose that $\op T$ is a self-adjoint operator and that there is a $\phi \in D(\op T^{\star}) = D(\op T) $ so that $\op T^{\star} \phi = \i \phi$. Then $\op T \phi = \i \phi$ and
\begin{align}
    - \i (\phi, \phi) =(\i \phi, \phi) = (\op T \phi, \phi) = (\phi, \op T^\star \phi ) = (\phi, \op T \phi) = \i (\phi, \phi) \:,
\end{align}
so $\phi = 0$. A similar proof shows that $\op T^\star \phi = -i \phi$ can have no solutions. 

The converse statement, that if $\op T$ is a closed symmetric operator and $\op T^\star \phi = \pm \i \phi$ has no solutions, then $\op T$ is self-adjoint, is the basic criterion of self-adjointness.

\begin{theorem}[The basic criterion for self-adjointness]
    Let $\op T$ be a symmetric operator on a Hilbert space $\H$. Then the following three statements are equivalent:
    \begin{enumerate}
        \item $\op T$ is self-adjoint.
        \item $\op T$ is closed and $\Ker (\op T^\star \pm \i) = \set{0}$ \:.
        \item $\Ran(\op T \pm \i) = \H$.
    \end{enumerate}
    
\end{theorem}

\begin{proof}
We have just seen that (1) implies (2). Suppose that (2) holds; we will
prove (3). Since $\op T^\star \phi = -\i \phi$ has no solutions, $\Ran (\op T- \i) $ must be dense.
Otherwise, if $\psi \in \Ran ( \op T- \i )^\bot$, we would have $((\op T-\i) \phi, \psi) =0$ for all $\phi \in D(\op T)$, so $\psi \in D(\op T^\star)$ and $(\op T - \i)^\star \psi = (\op T^\star + \i) \psi = 0$ which is impossible since $\op T^\star = - \i \psi $ has no solutions.
(Reversing this last argument we can show that if $\Ran ( \op T - \i)$ is dense, the kernel of $\op T^\star + \i $ is $\set{0}$.) Since $\Ran ( \op T - \i)$  is dense, we need only prove it is closed to conclude that $\Ran ( \op T - \i) = \H$ . But for all $\phi \in D(\op T)$
\begin{align}
    \norm{(\op T - \i) \phi}^2 = \norm{\op T \phi}^2 + \norm{\phi}^2 \:.
\end{align}

Thus if $\phi_n \in D(\op T)$ and $(\op T - \i) \phi_n \rightarrow \psi_0$, we conclude that $\phi_n$ converges to some vector $\phi_0$ and $\op T \phi_n$ converges too. Since $\op T$ is closed, $\phi_0 \in D(\op T)$ and $(\op T - \i) \phi_0 = \psi_0$. Thus, $\Ran(\op T - \i)$ is closed, so $\Ran (\op T - \i) = \H$. Similarly, $\Ran(T+\i) = \H$.

Finally, we will show that (3) implies (1). Let $\phi \in D(\op T^\star)$. Since $\Ran (\op T -\i) = \H$, there is an $\eta \in D(\op T)$ so that $(\op T - \i) \eta = (\op T^\star - \i) \phi$. $D(\op T) \subset D(\op T^\star)$, so $\phi - \eta \in D(\op T^\star)$ and \begin{align}
    (\op T^\star - \i)(\phi - \eta) = 0 \:.
\end{align}
Since $\Ran(\op T +\i) )=\H$, $\Ker (\op T^\star - \i) = \set{0}$, so $\phi = \eta \in D(\op T)$. This proves that $D(\op T^\star) = D(\op T)$, so $\op T$ is self-adjoint.

\end{proof}

\begin{corollary}
    Let $\op T$ be a symmetric operator on a Hilbert space. Then the following are equivalent:
    \begin{enumerate}
        \item $\op T$ is essentially self-adjoint.
        \item $\Ker (\op T^\star \pm \i) = \set{0}$.
        \item $\Ran(\op T \pm \i)$ are dense.
    \end{enumerate}
\end{corollary}

We conclude with an example which shows that a symmetric operator may have many self-adjoint extensions. Lest the reader be misled we remark that a symmetric operator may have no self-adjoint extensions (see Problem 4 and Section X.1).

\begin{example}
    Let $\op T = \i \der{}{x}$ with \begin{align}
        D(\op T) = \set{\phi | \phi \in AC[0,1], \: \phi(0)=0= \phi(1)} \:.
    \end{align}

A simple integration by parts shows that as an operator on $\L{2}{[0,1]}$, $\op T$ is
symmetric. We begin by determining $\op T^\star$. Let $j_\varepsilon$ be the function defined in Example 3 of Section VIII.1. Fix $0 <\alpha < \beta <1 $ and define  \begin{align}
    f_\varepsilon^{\alpha, \beta} (x) = j_\varepsilon(x-\beta) - j_\varepsilon(x - \alpha) \:, \\
    g_\varepsilon^{\alpha, \beta} (x) = \int_0^x f_\varepsilon^{\alpha, \beta} (t) \, \D t \:.
\end{align}
Let $\psi \in D(\op T^\star)$. For $\varepsilon$ small enough, $g_\varepsilon^{\alpha, \beta} \in D(\op T)$ so \begin{align}
    (\op T g_\varepsilon^{\alpha, \beta} , \psi) =(g_\varepsilon^{\alpha, \beta}, \op T^\star \psi) \:.
\end{align}
As $\varepsilon \rightarrow 0$, $-g_\varepsilon^{\alpha, \beta}$ converges to the characteristic function of $(\alpha, \beta)$ in $\L{2}{(0,1)}$ so 
\begin{align}
    (g_\varepsilon^{\alpha, \beta}, \op T^\star \psi) \rightarrow - \int_\alpha^\beta (\op T^\star \psi)(x) \, \D x \:.
\end{align}
The basic estimate of Example 3 shows that \begin{align}
    \op J_\varepsilon \phi = \int_0^1 j_\varepsilon(x-t)\phi(t)\, \D t
\end{align}
converges in $\L{2}{\R}$ to $\phi$ if $\phi$ is continous. Moreover, each $\op J_\varepsilon$ is a bounded operator of norm not greater than one. For if $\psi \in \L{2}{(0,1)}$, then \begin{align}
    |(\psi, \op J_\varepsilon \phi)| 
    \leq&
     \int_{[0,1]\times [0,1]} j_\varepsilon(x-t) |\phi(t)| |\psi(x)| \, \D x \D t 
    =
     \int_{[0,1]\times [0,1]} j_\varepsilon(y) |\phi(t)| |\psi(y+t)| \, \D y \D t 
     \leq \\ 
     \leq&
      \norm{\phi} \norm{\psi} \int_{[0,1]} j_\varepsilon(y) \, \D y 
     =
      \norm{\phi} \norm{\psi} \:.
\end{align}
By an $\varepsilon/3$ argument, $\op J_\varepsilon \phi \overset{L^2}\rightarrow \phi$ for all $\phi \in \L{2}{[0,1]}$.
Thus, the left side of (VIII.3)
converges to $-[\psi(\beta) - \psi(\alpha)]$ in mean square as $\varepsilon \rightarrow 0$. So, for almost all $\alpha, \beta$ \begin{align}
    -\i[\psi(\beta) - \psi(\alpha)] = \int_\alpha^\beta (\op T^\star \psi)(x) \, \D x \:.
\end{align}
This mean that $\psi$ is absolutely continous (see the Notes for Section VIII.1) and \begin{align}
    \i \der{\psi}{x} = (\op T^\star \psi)(x) \:.
\end{align}
Thus, $\psi \in AC[0,1]$ and $\op T^\star \psi = \i \der{\psi}{x} $. Conversely, integration by parts
shows that any $\psi \in AC[0,1]$ is in the domain of $\op T^\star$ and $\op T^\star \psi = \i \der{\psi}{x}$. Therefore $\op T^\star = \i \der{}{x}$ on $D(\op T^\star) = AC[0,1]$.
It is easy to see that $\op T$ is not essentially self-adjoint since \begin{align}
    e^{\pm x} \in D(\op T^\star) \quad \text{and } \quad \i \der{}{x} e^{\pm x} = \pm \i e^{\pm x} \:.
\end{align}

In fact, $\op T$ is closed (Problem 6) so $\op T$ is a closed, symmetric but not self-adjoint operator.
Does $\op T$ have any self-adjoint extensions? Yes, uncountably many different ones! Let $\alpha \in \C$, $|\alpha| = 1$, and define
\begin{align}
    \op T_\alpha = \i \der{}{x} \quad \text{on} \quad D(\op T_\alpha) = \set{\phi | \phi \in AC[0,1] , \: \phi(0) = \alpha \phi(1)} \:.
\end{align}

Each of these operators $\op T_\alpha$ is a different self-adjoint extension of $\op T$ (Problem 7),
Of course, each $\op T_\alpha$ is in turn extended by $\op T^\star$. These extensions are depicted in Figure VIII.1. The reason why there is exactly a circle of different possible extensions will be made clear in Section X.1.

\begin{figure}[H]
    \centering
    \includegraphics[width = 3 cm]{spectrumTalpha.png}
    \caption{The self-adjoint extensions of $\op T$.}
\end{figure}

\end{example}